# 小学期前两周阶段性总结

​																	——计62 李祥凡 2016011262

​	本人在小组中负责的工作主要是mission2的寻径部分, 重点包括路径规划, 避障, 轨迹平滑, 速度控制等

### 已经完成的工作

由于Lua脚本中已经控制令飞行器跟随着target移动,　路径规划即可直接控制target的移动路径来实现

#### 全局路径规划: 

mission2的任务要求是先抓取放在target_platform平台上的一个圆柱体, 然后穿过三个门，到达end平台上方，全局路径规划暴搜找到三个门，使得从target_platform平台开始，穿过三个门到达end平台上方的预计路径最短 (这里的预计路径是不考虑障碍物的, 即两点之间走直线)

#### 局部路径规划:

局部路径规划考虑的问题是怎么从一点到达另一点, 由于本场景中的障碍物数目较少，首先判断从起点到终点的连线上有无障碍物存在，若没有，直接走直线，若有障碍物，则使用RRT*算法搜索出一条可行的路径

#### 如何穿过门:

对每一个门, 定义一个入口点和一个出口点，从入口点按局部路径规划搜索出一条路径到达出口点，即可认为穿过了门

#### 避障:

将飞行器以及其他除门以外的障碍物都用一个包围盒来近似，飞行器与除门以外的障碍物之间的碰撞检测即可简化为相应的包围盒的碰撞判定。飞行器与门的碰撞检测只需判断飞行器的包围盒与门的横梁及立柱之间的碰撞即可

### 遇到的一些问题:

* 为了保持飞行器的稳定，target的移动步长不能过长，目前当步长控制为0.01时，飞行器能稳定到达终点，但耗费的时间较长, 与任务的用时要求差距较大 (完成整个mission2用时大概得至少2分钟)
* 之后在target的步长控制方面做过一些尝试, 比如在当target与飞行器的距离较大时, 减小target的步长; 距离较小时, 增大target的步长，这样反馈调节target的移动步长, 并未取得较好的效果, 飞机的稳定性没有得到提升，用时也并未下降
* 之后发现当target在垂直方向移动时, 飞行器的跟随较难保持稳定, 尤其是在垂直方向上下降时, 飞行器很容易翻掉，而水平方向上的移动，即使target的步长很大, 飞行器也能保持稳定的跟随. 此
* 路径的平滑性较差, 尤其是在各条局部路径的拼接处,　路径平滑性差会对飞行器的转向要求较高，飞行器由于惯性可能会翻掉

### 未来准备做的工作:

* 由于飞行器对target在垂直方向上的跟进稳定性较差, 准备尝试一下将三维路径规划转为二维路径规划，即在必要时才改变target的Z坐标，比如任务的最后要将飞行器升至end平台上方
* 对规划出的轨迹离散点进行B样条插值平滑，增加路径的平滑性
* 现在的RRT*算法是直接使用了ompl库函数实现, 今后将自己实现相应的寻径算法









